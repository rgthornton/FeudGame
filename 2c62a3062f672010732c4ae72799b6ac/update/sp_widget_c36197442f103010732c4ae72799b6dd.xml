<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {
  var c = this;

	if (c.options.team == 1) {
		c.team_players = c.data.team_one_players;
	}
	
	if (c.options.team == 2) {
		c.team_players = c.data.team_two_players;
	}	
};]]></client_script>
        <controller_as>c</controller_as>
        <css>.players {
  font-size: 1.7em;
	text-align: center; 
}

/*
#image {
	background: url('avatar-sheet-2.jpg');
  background-repeat: no-repeat;
	background-position: -24px -24px;
	width: 125px;
	height: 120px;  
}
*/

.current-player {
	border: 6px solid lightcoral;
  border-radius: 50%;
  //height: 18px;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>fn-playerlist</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>fn-playerlist</name>
        <option_schema>[{"name":"team","section":"other","label":"Team","type":"integer"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	data.game_id = $sp.getParameter('game_id');
	data.team_one_players = getTeamPlayers('team_one'); 
	data.team_two_players = getTeamPlayers('team_two'); 	

	function getTeamPlayers(team) {
		var players = [];

		var gr = new GlideRecord('x_159204_feudnow_players');
		gr.addQuery('game', data.game_id);		
		gr.addQuery('team', team);
		gr.query();

		while (gr.next()) {
			var o = {};
			o.name = gr.getDisplayValue('player');
			o.pic = gr.avatar.toString();
			// o.pic = 'https://joeschmoe.io/api/v1/random?' + new GlideDateTime().getNumericValue();

			players.push(o);
		}

		return players;
	}

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>rpoore_admin</sys_created_by>
        <sys_created_on>2021-05-19 01:02:36</sys_created_on>
        <sys_id>c36197442f103010732c4ae72799b6dd</sys_id>
        <sys_mod_count>97</sys_mod_count>
        <sys_name>fn-playerlist</sys_name>
        <sys_package display_value="FeudNow" source="x_159204_feudnow">2c62a3062f672010732c4ae72799b6ac</sys_package>
        <sys_policy/>
        <sys_scope display_value="FeudNow">2c62a3062f672010732c4ae72799b6ac</sys_scope>
        <sys_update_name>sp_widget_c36197442f103010732c4ae72799b6dd</sys_update_name>
        <sys_updated_by>rpoore_admin</sys_updated_by>
        <sys_updated_on>2021-07-17 23:42:15</sys_updated_on>
        <template><![CDATA[<div class="players">  
   Players
    <!-- player list -->
    <div class="grid-item" ng-repeat="users in c.team_players">
      <img ng-class="{ 'current-player': users.name.indexOf('Bow') > -1 }" src="{{users.pic}}" width="64px" title="{{users.name}}"/>
			<p></p>
  </div> 
  	
</div>
]]></template>
    </sp_widget>
</record_update>
